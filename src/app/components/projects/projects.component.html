<section id="projects" class="section-container">
  <h2 class="section-title" data-aos="fade-up">Things I've worked on</h2>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    @for (project of projects; track project) {
    <div (click)="openModal(project)" class="bg-navy border border-slate/20 rounded-lg overflow-hidden hover:border-green-400/50 transition-all duration-300 hover:-translate-y-2 hover:shadow-xl hover:shadow-green-400/10 flex flex-col h-full cursor-pointer" data-aos="fade-up">
      <div class="p-6 flex flex-col flex-grow">
        <p class="text-green-400 font-mono text-sm mb-2">Featured Project</p>
        <h3 class="text-xl font-bold text-lightest-slate mb-2">{{ project.title }}</h3>
        @if (project?.link) {
        <a [href]="project.link" target="_blank" class="text-green-400 hover:underline text-sm mb-4 inline-block">View Project →</a>
        }
        <ul class="list-disc ml-4 mb-4 text-slate text-sm space-y-1 line-clamp-6">
          @for (desc of project.description; track desc) {
          <li class="text-slate">{{ desc }}</li>
          }
        </ul>
        <ul class="flex flex-wrap gap-2 text-xs font-mono text-slate mt-auto">
          @for (tech of project.techStack; track tech) {
          <li class="bg-slate/10 px-2 py-1 rounded">{{ tech }}</li>
          }
        </ul>
      </div>
    </div>
    }
  </div>

  <!-- Modal -->
  @if (isModalOpen && selectedProject) {
  <div class="fixed inset-0 bg-black flex items-center justify-center z-50 p-4" (click)="closeModal()">
    <div class="bg-navy border border-green-400/30 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto" (click)="$event.stopPropagation()">
      <div class="p-6 md:p-8">
        <!-- Header -->
        <div class="flex justify-between items-start mb-6">
          <div>
            <p class="text-green-400 font-mono text-sm mb-2">Featured Project</p>
            <h3 class="text-2xl md:text-3xl font-bold text-lightest-slate mb-3">{{ selectedProject.title }}</h3>
            @if (selectedProject?.link) {
            <a [href]="selectedProject.link" target="_blank" (click)="$event.stopPropagation()" class="text-green-400 hover:underline text-sm inline-block">View Project →</a>
            }
          </div>
          <button (click)="closeModal()" class="text-slate hover:text-green-400 text-2xl font-bold transition-colors">&times;</button>
        </div>

        <!-- Description -->
        <ul class="list-disc ml-4 mb-6 text-slate text-sm space-y-2">
          @for (desc of selectedProject.description; track desc) {
          <li class="text-slate">{{ desc }}</li>
          }
        </ul>

        <!-- Tech Stack -->
        <div class="border-t border-slate/20 pt-4">
          <p class="text-lightest-slate font-semibold mb-3">Technologies Used:</p>
          <ul class="flex flex-wrap gap-2 text-xs font-mono text-slate">
            @for (tech of selectedProject.techStack; track tech) {
            <li class="bg-slate/10 px-3 py-1.5 rounded">{{ tech }}</li>
            }
          </ul>
        </div>
      </div>
    </div>
  </div>
  }
</section>
